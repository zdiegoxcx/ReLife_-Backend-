<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Perfil - ReLife</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/user.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    
    <header class="navbar">
        <div class="logo"><a href="/"><span class="re-white">RE</span>LIFE</a></div>
        <div class="welcome-user">EDITAR PERFIL</div>
        <a href="/user" class="logout-btn" style="text-decoration: none;">Volver Atrás</a>
    </header>

    <div class="login-container" style="min-height: calc(100vh - 80px);">
        
        <div class="form-box">
            <h3 class="form-subtitle">Editar Información</h3>
            <p id="message-display" style="text-align: center; margin-top: 15px; font-weight: bold;"></p>

            <form id="profile-form" class="Activo">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label>Correo Electrónico:</label>
                        <input type="email" id="perfil-email" disabled style="background-color: #333; color: #aaa; border-color: #444; cursor: not-allowed;">
                    </div>
                    
                    <div class="input-group">
                        <label>Nombre:</label>
                        <input type="text" id="perfil-nombre" required>
                    </div>

                    <div class="input-group">
                        <label>Apellido:</label>
                        <input type="text" id="perfil-apellido" required>
                    </div>

                    <div class="input-group">
                        <label>Región:</label>
                        <select id="perfil-region" required></select>
                    </div>
                    
                    <div class="input-group">
                        <label>Comuna:</label>
                        <select id="perfil-comuna" required></select>
                    </div>

                    <div class="input-group full-width">
                        <label>Contactos:</label>
                        <input type="text" id="perfil-contactos" placeholder="Ej: +569... | @miperfil">
                    </div>
                    
                    <div class="input-group full-width" id="password-change-group">
                        <label>Nueva Contraseña (opcional):</label>
                        <input type="password" id="perfil-password" placeholder="Dejar vacío para no cambiar">
                    </div>
                </div> 

                <div class="acciones">
                    <button type="submit" id="guardar-btn" style="background-color: #38c172;">Guardar Cambios</button>
                    
                    <button type="button" id="editar-btn" style="display: none;">Editar</button>
                    <button type="button" id="cancelar-btn" style="display: none;">Cancelar</button>

                    <button type="button" id="eliminar-btn" style="background-color: #dc3545; margin-top: 10px;">Eliminar Cuenta</button>
                </div>
            </form>
        </div>
    </div>

    <%- include('partials/footer') %>

    <script src="/js/user.js"></script> 
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                const editarBtn = document.getElementById('editar-btn');
                if(editarBtn) editarBtn.click();

                const inputs = document.querySelectorAll('input:not(#perfil-email), select');
                inputs.forEach(i => i.disabled = false);
                
                const passGroup = document.getElementById('password-change-group');
                if(passGroup) passGroup.style.display = 'block';
            }, 300); 
        });
    </script>
</body>
</html>